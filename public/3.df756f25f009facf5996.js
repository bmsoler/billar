webpackJsonp([3],{139:function(t,a,e){function i(t){e(156)}var n=e(30)(e(143),e(160),i,"data-v-32b254a1",null);t.exports=n.exports},143:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(54),n=e.n(i);a.default={data:function(){return{token:null,admin:null,info:"",fecha:"",avatar:"/static/img/",avatar2:"/static/img/",infoRules:[function(t){return!!t||"La información es obligatoria"}],fechaRules:[function(t){return!!t||"La fecha es obligatoria"}],imageRules:[function(t){return!!t||"La imagen es obligatoria"}],calendario:[],dialogAddEvento:!1,dialog:!1,current_id_evento_to_update:null,window_height:700,events_height:300,valid:!1,evento_to_delete:null}},computed:{theme:function(){return this.$store.state.fondoDialog}},methods:{init:function(){function t(t,a,e){var i=$('<input type="text">');i.val(a?a.image+":"+a.name:""),t.html(i),i.focus(),i.blur(function(){var t=i.val();if(0===t.length)e(null);else{var a=t.split(":");e({image:a[0],name:a[1]})}})}function a(t,a,e,i){switch(i){case"empty-bye":return void t.append("No team");case"empty-tbd":return void t.append("Pendiente");case"entry-no-score":case"entry-default-win":case"entry-complete":return void("angel"===a.image||"jaime"===a.image||"jesus"===a.image?t.append('<img src="static/img/'+a.image+'.jpg" width="25px" style="position: absolute; width: 34px;"/> ').append('<p style="margin-left: 40px;margin-top: 7px;">'+a.name+"</p>"):t.append('<img src="static/img/'+a.image+'.png" width="25px" style="position: absolute; width: 34px;"/> ').append('<p style="margin-left: 40px;margin-top: 7px;">'+a.name+"</p>"))}}var e=this;$(function(){var t=["customHandlers"];$.each(t,function(t,a){var e=$("div#"+a);$('<div class="demo"></div>').appendTo(e)})}),n.a.get(this.$store.state.URL_NODE_SERVER+"/getCampeonatos",{headers:{Authorization:"Bearer "+e.token}}).then(function(i){var o=i.data[0];$(function(){$("div#customHandlers .demo").bracket({init:o,teamWidth:140,scoreWidth:45,matchMargin:50,roundMargin:90,disableToolbar:!e.admin,disableTeamEdit:!e.admin,centerConnectors:!1,save:function(t,a){n.a.post(e.$store.state.URL_NODE_SERVER+"/saveCampeonato",t,{headers:{Authorization:"Bearer "+e.token}}).then(function(t){}).catch(function(t){console.log(t)})},decorator:{edit:t,render:a}})})}).catch(function(t){e.$localStorage.remove("billarToken"),e.$localStorage.remove("billarUser"),e.$localStorage.remove("billarImg"),e.$router.push("/")})},getCalendario:function(){var t=this;n.a.get(t.$store.state.URL_NODE_SERVER+"/getCalendario",{headers:{Authorization:"Bearer "+t.token}}).then(function(a){t.calendario=a.data}).catch(function(a){t.$localStorage.remove("billarToken"),t.$localStorage.remove("billarUser"),t.$localStorage.remove("billarImg"),t.$router.push("/")})},openDialogAddEvento:function(){this.info="",this.fecha="",this.avatar="/static/img/user.png",this.avatar2="/static/img/user.png",this.dialogAddEvento=!0,this.current_id_evento_to_update=null},openDialog:function(){this.dialog=!0},editEvento:function(t){this.admin&&(this.dialogAddEvento=!0,this.current_id_evento_to_update=t._id,this.info=t.info,this.fecha=t.fecha,this.avatar=t.avatar,this.avatar2=t.avatar2)},cancelDeleteEvento:function(){this.evento_to_delete=null,this.dialog=!1},saveEvento:function(){if(this.$refs.form1.validate()){var t=this;if(this.current_id_evento_to_update){var a={_id:t.current_id_evento_to_update,info:t.info,fecha:t.fecha,avatar:t.avatar,avatar2:t.avatar2};n.a.post(t.$store.state.URL_NODE_SERVER+"/saveCalendario",a,{headers:{Authorization:"Bearer "+t.token}}).then(function(a){t.getCalendario(),t.dialogAddEvento=!1}).catch(function(t){console.log(t)})}else{var e={info:t.info,fecha:t.fecha,avatar:t.avatar,avatar2:t.avatar2};n.a.post(t.$store.state.URL_NODE_SERVER+"/addCalendario",e,{headers:{Authorization:"Bearer "+t.token}}).then(function(a){t.getCalendario(),t.dialogAddEvento=!1}).catch(function(t){console.log(t)})}}},deleteEvento:function(){var t=this;this.dialog=!1,this.dialogAddEvento=!1,n.a.post(t.$store.state.URL_NODE_SERVER+"/deleteCalendario",{_id:t.current_id_evento_to_update},{headers:{Authorization:"Bearer "+t.token}}).then(function(a){t.current_id_evento_to_update=null,t.getCalendario()}).catch(function(a){console.log(a),t.current_id_evento_to_update=null})},clear:function(){this.dialogAddEvento=!1}},mounted:function(){this.admin=this.$store.state.admin,this.token=this.$localStorage.get("billarToken"),this.window_height=window.innerHeight-150,this.events_height=window.innerHeight-700,this.init(),this.getCalendario()}}},152:function(t,a,e){a=t.exports=e(16)(!1),a.push([t.i,".texto[data-v-32b254a1]{font-size:17px!important;font-weight:400!important}.container[data-v-32b254a1]{-webkit-box-flex:1!important;-ms-flex:1 1 100%!important;flex:1 1 100%!important;margin:auto!important;padding:16px!important;padding-top:0!important;width:100%!important}[data-v-32b254a1]::-webkit-scrollbar{width:12px!important}[data-v-32b254a1]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3)!important;border-radius:10px!important}[data-v-32b254a1]::-webkit-scrollbar-thumb{border-radius:10px!important;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.5)!important}.scrollform[data-v-32b254a1]{overflow-y:scroll!important}",""])},156:function(t,a,e){var i=e(152);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(17)("19e72078",i,!0,{})},160:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-container",{attrs:{fluid:"","fill-height":""}},[e("v-slide-y-transition",{attrs:{mode:"out-in"}},[e("v-layout",{attrs:{column:"","align-center":"","justify-center":""}},[e("div",{staticClass:"fadeIn",staticStyle:{"margin-top":"10px","z-index":"10"},attrs:{id:"main"}},[e("div",{staticStyle:{display:"inline-block"},attrs:{id:"customHandlers"}})]),t.calendario.length>0||t.admin?e("v-flex",{staticStyle:{"margin-top":"20px","margin-bottom":"50px",padding:"5px","min-width":"50%"},attrs:{"d-flex":"",xs12:"",md12:"",lg12:""}},[e("v-card",{staticClass:"widget-title fadeIn"},[e("v-toolbar",{staticStyle:{height:"100px",background:"transparent"},attrs:{dark:""}},[e("v-toolbar-title",{staticClass:"texto"},[t._v("\n                  Fechas y calendario\n                  "),e("v-tooltip",{attrs:{right:""}},[t.admin?e("v-btn",{attrs:{slot:"activator",icon:""},on:{click:t.openDialogAddEvento},slot:"activator"},[e("v-icon",[t._v("playlist_add")])],1):t._e(),e("span",[t._v("Añadir evento")])],1)],1)],1),e("div",{staticStyle:{position:"absolute",right:"10px",left:"10px",top:"60px"}},[e("v-list",{staticStyle:{overflow:"auto"},style:{"max-height":t.events_height+"px"}},t._l(t.calendario,function(a){return e("v-list-tile",{key:a.title,attrs:{avatar:""},on:{click:function(e){t.editEvento(a)}}},[e("v-list-tile-action",[e("v-icon",{attrs:{color:"grey"}},[t._v("event")])],1),e("v-list-tile-content",[e("v-list-tile-title",[t._v(t._s(a.info))]),e("v-list-tile-sub-title",[t._v(t._s(a.fecha))])],1),e("v-list-tile-avatar",[e("img",{attrs:{src:a.avatar}})]),e("v-list-tile-avatar",[e("img",{attrs:{src:a.avatar2}})])],1)}))],1)],1)],1):t._e(),t.admin?e("v-fab-transition",[e("v-btn",{staticStyle:{"background-color":"rgba(255, 255, 255, 0.2)"},attrs:{router:"",to:"/Datos",dark:"",fab:"",fixed:"",bottom:"",right:"",small:""}},[e("v-icon",[t._v("view_list")])],1)],1):t._e()],1)],1),e("v-dialog",{attrs:{"max-width":"80%"},model:{value:t.dialogAddEvento,callback:function(a){t.dialogAddEvento=a},expression:"dialogAddEvento"}},[e("v-card",{staticClass:"scrollform",class:t.theme,style:{"max-height":t.window_height+"px"},attrs:{dark:""}},[e("v-card-title",[e("span",{staticClass:"headline"},[t._v("Datos del evento")])]),e("v-card-text",[e("v-form",{ref:"form1",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(a){t.valid=a},expression:"valid"}},[e("v-layout",{attrs:{row:"",wrap:"","align-start":""}},[e("v-flex",{staticStyle:{padding:"20px","padding-top":"0px"},attrs:{"d-flex":"",xs12:"",sm6:"",md6:""}},[e("v-text-field",{attrs:{label:"Contrincantes",rules:t.infoRules,required:""},model:{value:t.info,callback:function(a){t.info=a},expression:"info"}})],1),e("v-flex",{staticStyle:{padding:"20px","padding-top":"0px"},attrs:{"d-flex":"",xs12:"",sm6:"",md6:""}},[e("v-text-field",{attrs:{label:"Fecha",rules:t.fechaRules,required:""},model:{value:t.fecha,callback:function(a){t.fecha=a},expression:"fecha"}})],1),e("v-flex",{staticStyle:{padding:"20px","padding-top":"0px"},attrs:{"d-flex":"",xs12:"",sm6:"",md6:""}},[e("v-text-field",{attrs:{label:"Imagen 1",rules:t.imageRules,required:""},model:{value:t.avatar,callback:function(a){t.avatar=a},expression:"avatar"}})],1),e("v-flex",{staticStyle:{padding:"20px","padding-top":"0px"},attrs:{"d-flex":"",xs12:"",sm6:"",md6:""}},[e("v-text-field",{attrs:{label:"Imagen 2",rules:t.imageRules,required:""},model:{value:t.avatar2,callback:function(a){t.avatar2=a},expression:"avatar2"}})],1)],1),t.admin?e("v-btn",{staticStyle:{"margin-top":"0px"},attrs:{color:"light-green darken-4",disabled:!t.valid},on:{click:t.saveEvento}},[t._v("\n          Guardar\n        ")]):t._e(),e("v-btn",{staticStyle:{"margin-top":"0px"},nativeOn:{click:function(a){t.clear(a)}}},[t._v("Cancelar")]),e("v-btn",{staticStyle:{float:"right","margin-top":"0px"},attrs:{color:"red"},on:{click:t.openDialog}},[t._v("Borrar")])],1)],1)],1)],1),e("v-dialog",{attrs:{"max-width":"50%"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[t._v("¿Esta seguro de que desea borrar el evento seleccionado?")]),e("v-card-text",[t._v("Esta operación no podrá ser deshecha")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{flat:"flat"},on:{click:function(a){t.cancelDeleteEvento()}}},[t._v("Cancelar")]),e("v-btn",{attrs:{color:"red",flat:"flat"},on:{click:function(a){t.deleteEvento()}}},[t._v("Borrar")])],1)],1)],1)],1)},staticRenderFns:[]}}});